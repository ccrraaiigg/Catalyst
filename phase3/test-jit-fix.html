<!DOCTYPE html>
<html>
<head>
    <title>JIT Compilation Test</title>
    <script type="module">
        import { SqueakVM } from './squeak-vm.js';
        
        async function testJIT() {
            const vm = new SqueakVM();
            vm.setDebugMode(true);
            
            try {
                console.log('üîç Initializing VM...');
                await vm.initialize();
                console.log('‚úÖ VM initialized successfully');
                
                console.log('üîç Running VM...');
                const result = await vm.run();
                console.log('‚úÖ VM run completed:', result);
                
                const stats = vm.getJITStatistics();
                console.log('üìä JIT Stats:', stats);
                
                document.getElementById('result').innerHTML = `
                    <h3>Test Results</h3>
                    <p>‚úÖ VM initialized and ran successfully</p>
                    <p>Result: ${JSON.stringify(result)}</p>
                    <p>JIT Statistics: ${JSON.stringify(stats, null, 2)}</p>
                `;
                
            } catch (error) {
                console.error('‚ùå Test failed:', error);
                document.getElementById('result').innerHTML = `
                    <h3>Test Results</h3>
                    <p>‚ùå Test failed: ${error.message}</p>
                    <p>Check console for details</p>
                `;
            }
        }
        
        // Run test when page loads
        window.addEventListener('load', testJIT);
    </script>
</head>
<body>
    <h1>JIT Compilation Test</h1>
    <p>Open browser console to see detailed logs</p>
    <div id="result">Loading...</div>
</body>
</html> 